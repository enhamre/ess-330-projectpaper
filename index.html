<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Emily Hamre">
<meta name="author" content="Olivia Gilpin">
<meta name="author" content="Josh Ray">

<title>ESS 330 Paper</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-973236bd072d72a04ee9cd82dcc9cb29.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ESS 330 Paper</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Emily Hamre </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Quantitative Reasoning of Ecosystem Science Lab
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Olivia Gilpin </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Quantitative Reasoning of Ecosystem Science Lab
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Josh Ray </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Quantitative Reasoning of Ecosystem Science Lab
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">Section</h2>
<p><span class="citation" data-cites="6e981dac0c1c4278bd4199223da966b8">(<a href="#ref-6e981dac0c1c4278bd4199223da966b8" role="doc-biblioref">Bhatti et al. 2024</a>)</span></p>
<p><span class="citation" data-cites="en14133784">(<a href="#ref-en14133784" role="doc-biblioref">Go≈Çasa et al. 2021</a>)</span></p>
<p><span class="citation" data-cites="essd-16-2625-2024">(<a href="#ref-essd-16-2625-2024" role="doc-biblioref">Forster et al. 2024</a>)</span></p>
<p>[@ ].</p>
<p><span class="citation" data-cites="article">(<a href="#ref-article" role="doc-biblioref">Siddik et al. 2021</a>)</span></p>
<p><span class="citation" data-cites="su17031330">(<a href="#ref-su17031330" role="doc-biblioref">Yƒ±lmaz and Ozaner 2025</a>)</span></p>
</section>
<section id="proposal-1-agricultures-contribution-to-global-ghg-emissions" class="level2">
<h2 class="anchored" data-anchor-id="proposal-1-agricultures-contribution-to-global-ghg-emissions">Proposal 1: Agriculture’s Contribution to Global GHG Emissions</h2>
<p>Author: Olivia Gilpin</p>
<p>Justification The emissions of Greenhouse Gases are primarily derived from various inputs into the atmosphere, heavily including inputs from agricultural processes (Filonchyk et al., 2024). The patterns of global production play a significant role in climate variability, which are affected by the flux of greenhouse gas emissions (Bhatti et al., 2024). Understanding the patterns of greenhouse gas emissions, with the connection to agricultural practices, and in correlation to climate variability, will give us an overview of the interconnected relationships (Gołasa et al., 2021). Exploring if agriculture practices would be affected by a decrease in non-agricultural activities that cause greenhouse gas emissions investigates whether influences such as industry, energy, and transportation could be direct mechanisms of change for agricultural practices. We need to explore these mechanisms of change in order to see the relationship between non-agricultural sources and agricultural methods. This research will inform various stakeholders, especially policymakers, of sustainable practices aimed at eliminating larger inputs that reduce climate resiliency.</p>
<p>Research objective/question/hypothesis The objective of this study is to evaluate the relationship between agricultural emissions and practices in correlation with reducing non-agricultural greenhouse gas emission sources. Through this research objective, the goal is to assess if a decrease in emissions from non-agricultural sources will influence agricultural emissions and sustainability. Would a decrease in non-agricultural greenhouse gas emissions influence agricultural emissions and sustainability?</p>
<p>Hypothesis: A decrease in non-agricultural greenhouse gas emissions will reduce agricultural contributions to greenhouse gas emissions.</p>
<p>Proposed Methods Through examining the relationship between greenhouse gas emissions and agricultural practices, we would take a comparative and statistical analysis approach. This approach would include an initial establishment of emission baselines, utilizing the total greenhouse gas emissions from agriculture and the CO₂ emissions from agriculture (Data Commons, 2020). We would then utilize the data on global greenhouse gas emissions and analyze that in comparison to the research on climate variability effects from agricultural practices (Bhatti et al., 2024; Filonchyk et al., 2024; Gołasa et al., 2021; Data Commons, 2020). A cross-comparison of emissions by source in order to differentiate agricultural emissions from other sources, and if reductions in emissions from non-agricultural emissions have an influence on the total greenhouse gas outputs from agriculture. For the statistical analysis, we would run a correlation analysis, a regression model, and a mediating analysis to evaluate the empirical significance of relationships.</p>
<p>Expected Outcomes The basis of this research is to identify a pattern between non-agricultural sources of greenhouse gas emissions and agricultural practices. This is essential to connect the relationships between sources of greenhouse gas emissions to contribute to sustainable agricultural practices implementation. We expect this research to be able to inform stakeholders, such as policymakers, about the best sustainable agricultural practices.</p>
</section>
<section id="proposal-2-identifying-key-contributors-to-global-co₂-emissions-effects-on-global-climate-systems" class="level2">
<h2 class="anchored" data-anchor-id="proposal-2-identifying-key-contributors-to-global-co₂-emissions-effects-on-global-climate-systems">Proposal 2: Identifying Key Contributors to Global CO₂ Emissions Effects on Global Climate Systems</h2>
<p>Author: Olivia Gilpin</p>
<p>Justification Carbon Dioxide emissions are a key contributor to climate change, driven by anthropogenic effects, which have a significant contribution to overall global emissions (Omemen &amp; Aldbbah, 2025). There are various drivers of anthropogenic climate change, and fossil fuel combustion, releasing the greenhouse gas carbon dioxide into the atmosphere, is a primary driver (Siddik et al., 2021). Narrowing down the sources of Carbon Dioxide emissions over a temporal scale of the recent five years will show us global trends for informing stakeholders on future regulation measures. Global climate systems must be further assessed for human influence and the correlation to global Carbon Dioxide emissions on ecosystem functions (Forster et al., 2024). Understanding the environmental consequences of Carbon Dioxide emissions impacts every sector of life on earth, in addition to the environmental impacts, such as economic, social, and cultural intersections (Yılmaz &amp; Ozaner, 2025). Through further understanding of the interconnectedness of global Carbon Dioxide emissions, stakeholders can be better informed of combating the consequences and creating interdisciplinary frameworks.</p>
<p>Research objective/question/hypothesis The research objective of this study will examine the impact of Carbon Dioxide emissions, key contributors to global Carbon Dioxide emissions, and their effects on global climate systems. Emissions vary by source, which will analyze the effects of anthropogenic factors such as energy, agriculture, and transportation in correlation to ecosystem functions such as coastal ecology, carbon sequestration, and weather patterns. Do the varying sources of Carbon Dioxide emissions into the atmosphere have different effects on ecosystem functions based on source? Hypothesis: Carbon Dioxide emissions effects on ecosystem functions will vary by the source of Carbon Dioxide emissions.</p>
<p>Proposed Methods Analyzing the effects on global climate systems through identifying key contributors to global Carbon Dioxide emissions will require obtaining data on global Carbon Dioxide emission rates, using five consecutive years (Data Commons). Ecosystem function data will be obtained to include carbon sequestration, weather patterns, and coastal ecology studies. Ecosystem data may be obtained from sources including Data Commons, NOAA, NASA, and IUCN. Carbon Dioxide emissions will then be cross-analyzed through statistical analysis to assess the relationships between ecosystem functions and emissions. Correlation tests will be utilized, including a regression model and comparative analysis. These forms of statistical analysis will express the influence of emissions on environmental factors.</p>
<p>Expected Outcomes The basis of this research intends to expand upon the effects of Carbon Dioxide emissions on global climate systems, creating frameworks that will better strategize and plan with global stakeholders. This research takes crucial factors of economic, cultural, social, and environmental into consideration in anthropogenic climate change. Providing this data will relay to stakeholders an analysis of the most to least impactful sources of global Carbon Dioxide Emissions for prioritization of future interventions, regulations, and policies.</p>
</section>
<section id="proposal-3-greenhouse-gas-emissions-from-electricity-generation-in-the-world" class="level2">
<h2 class="anchored" data-anchor-id="proposal-3-greenhouse-gas-emissions-from-electricity-generation-in-the-world">Proposal 3: Greenhouse Gas Emissions From Electricity Generation in the World</h2>
<p>Author: Josh Ray</p>
<p>Justification: This project would be very important because electricity generation is the number 1 greenhouse gas polluting industry in the world. This is the main critique of electric vehicles, it is that even though they release no emissions in combustion, they require a large amount of electricity which is largely generated by greenhouse gas polluting methods, the percentage of electricity generated by these methods varies greatly across many countries which the dataset accounts for. We need a future with clean renewable energy and I believe examining just how much emissions are released from the non-renewable sources will show the problem very well. In this project I will show just exactly how detrimental the energy sector is right now to our planets future and how we need to transition to cleaner energy sources in order to slow the effects of climate change. A big part of this project will be identifying which countries rely on fossil fuel sources the most to generate electricity and how much emissions would drop globally with these countries transitioning towards cleaner energy generation methods.</p>
<p>Research Question, objective, and hypothesis: How many less tons of CO2 would be released into the atmosphere if the top 10 country polluters by tons of CO2 transitioned all their energy generation to non-emitting sources?</p>
<p>The objective is to determine how great of an impact the energy sector could make on the reduction of CO2 emissions by switching to cleaner sources.</p>
<p>My hypothesis is that if the top 10 CO2 emitting countries switched to non CO2 emitting energy generation the overall CO2 emissions on earth would drop by 20%.</p>
<p>Proposed Methods: I will use two data sets to determine the overall global percentage of CO2 emission reduction would result from the top 10 emitting countries switching to clean energy. https://climatetrace.org/inventory?subsector=electricity-generation&amp;year_from=2023&amp;year_to=2023&amp;gas=co2e100 https://ourworldindata.org/grapher/annual-co2-emissions-per-country The scope of my study is to use the data of total annual CO2 emissions in the world and then use my other dataset to filter it by emissions from electricity generation, both datasets have country filters so we can determine the top 10 countries and go from there. This will be using a temporal scale method. The variables I have available are countries, emissions, percentage change, emissions per capita, and percentage of global use.</p>
<p>Expected Outcomes: I expect the top 10 overall CO2 emitting countries to have a large portion of their emissions coming from energy creation. Using all the data I have I expect that if the top 10 overall emitting countries switched to 100% clean energy that the overall CO2 emissions on earth would drop by at least 20%.</p>
</section>
<section id="proposal-4-identifying-how-economic-growth-increases-co2-emissions." class="level2">
<h2 class="anchored" data-anchor-id="proposal-4-identifying-how-economic-growth-increases-co2-emissions.">Proposal 4: Identifying How Economic Growth increases CO2 emissions.</h2>
<p>Author: Josh Ray</p>
<p>Justification: It is no secret that developed nations emit far more CO2 emissions than developing nations. This shows in the statistic that the US and China combined emit over 40% of CO2 in the entire globe. This has been brought up a lot at UN conventions and many other places on the global stage where developing nations are demanding that developed nations do more to reduce their emissions that are affecting everybody on earth. I think it is very important to examine how the increase of GDP in a nation coincides with increases in CO2 emissions, I believe this is true for both developed and developing nations. This is important because as countries want to increase their GDP and have booming economies, we just determine ways to do so without completely destroying our planet for future generations to come. Showing the correlation between the two could allow for ideas to be proposed on how to sustainably grow an economy.</p>
<p>Research Question, Objective, and Hypothesis: What is the ratio of GDP increase percentage to the percentage of CO2 emission increase?</p>
<p>The objective in answering this question is to examine how much emissions change with a country’s GDP increasing. This will allow us to examine the relationship between the two and be able to predict future emissions and prepare for them.</p>
<p>My hypothesis is that an increase in GDP percentage is a 1:1 ratio with an increase in CO2 emission percentage.</p>
<p>Proposed Methods: My method will include combining a dataset showing all the countries GDP change from 2022 to 2023 and a dataset showing percentage change in those countries overall CO2 emissions. https://data.worldbank.org/indicator/NY.GDP.MKTP.KD.ZG https://climatetrace.org/inventory?year_from=2023&amp;year_to=2023&amp;gas=co2e100 The scope of my study is examining the 25 developed nations GDP and CO2 emission change from 2022-2023 as well as 25 developing nations so that we represent the entire global community well. This will be a temporal scale method. The variables I have are developed/developing nation status, CO2 emissions, CO2 emissions % change, GDP percentage change. Expected Outcomes: I expect a 1:1 ratio of GDP increase and CO2 emission increase. I expect very little to no difference between developing and developed nations ratios. These outcomes can allow us to examine our world economy and find solutions to how we can increase a country’s economies without sacrificing our world’s future to do so.</p>
</section>
<section id="references" class="level2 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-6e981dac0c1c4278bd4199223da966b8" class="csl-entry" role="listitem">
Bhatti, Uzair Aslam, Mughair Aslam Bhatti, Hao Tang, M. S. Syam, Emad Mahrous Awwad, Mohamed Sharaf, and Yazeed Yasin Ghadi. 2024. <span>“Global Production Patterns: Understanding the Relationship Between Greenhouse Gas Emissions, Agriculture Greening and Climate Variability.”</span> <em>Environmental Research</em> 245 (March). <a href="https://doi.org/10.1016/j.envres.2023.118049">https://doi.org/10.1016/j.envres.2023.118049</a>.
</div>
<div id="ref-essd-16-2625-2024" class="csl-entry" role="listitem">
Forster, P. M., C. Smith, T. Walsh, W. F. Lamb, R. Lamboll, B. Hall, M. Hauser, et al. 2024. <span>“Indicators of Global Climate Change 2023: Annual Update of Key Indicators of the State of the Climate System and Human Influence.”</span> <em>Earth System Science Data</em> 16 (6): 2625–58. <a href="https://doi.org/10.5194/essd-16-2625-2024">https://doi.org/10.5194/essd-16-2625-2024</a>.
</div>
<div id="ref-en14133784" class="csl-entry" role="listitem">
Go≈Çasa, Piotr, Marcin Wysoki≈Ñski, Wioletta Bie≈Ñkowska-Go≈Çasa, Piotr Gradziuk, Magdalena Golonko, Barbara Gradziuk, Agnieszka Siedlecka, and Arkadiusz Gromada. 2021. <span>“Sources of Greenhouse Gas Emissions in Agriculture, with Particular Emphasis on Emissions from Energy Used.”</span> <em>Energies</em> 14 (13). <a href="https://doi.org/10.3390/en14133784">https://doi.org/10.3390/en14133784</a>.
</div>
<div id="ref-article" class="csl-entry" role="listitem">
Siddik, Md, Md. Tariqul Islam, A. Zaman, and Md Hasan. 2021. <span>“Current Status and Correlation of Fossil Fuels Consumption and Greenhouse Gas Emissions.”</span> <em>International Journal of Energy, Environment and Economics</em> 28 (December): 103–19.
</div>
<div id="ref-su17031330" class="csl-entry" role="listitem">
Yƒ±lmaz, Salim, and Demet Ozaner. 2025. <span>“Causality Between Carbon Emissions, Temperature Changes, and Health Expenditures: A Comparative Panel Approach with Environmental and Economic Indicators.”</span> <em>Sustainability</em> 17 (3). <a href="https://doi.org/10.3390/su17031330">https://doi.org/10.3390/su17031330</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>